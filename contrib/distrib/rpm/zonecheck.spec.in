Summary: Perform consistency checks on DNS zones
Name: zonecheck
Version: @VERSION@
Release: 1
License: GPL
Group: Applications/Internet
URL: http://www.zonecheck.fr/

Packager: Jean-Philippe Pick <zonecheck@nic.fr>
Vendor: The ZoneCheck Team

Source: http://savannah.nongnu.org/download/zonecheck/%{name}-%{version}.tgz
BuildRoot: %{_tmppath}/root-%{name}-%{version}
BuildArch: noarch

BuildRequires: ruby >= 1.8, ruby-libs
Requires: ruby >= 1.8, ruby-libs

%description
ZoneCheck is intended to help solve DNS misconfigurations or
inconsistencies that are usually revealed by an increase in
the latency of the application. The DNS is a critical resource
for every network application, so it is quite important to
ensure that a zone or domain name is correctly configured in
the DNS.

%package cgi
Summary: Web service interface for ZoneCheck
Group: Applications/Internet
Requires: %{name} = %{version}

%description cgi
Provide a web service interface for ZoneCheck.
(ZoneCheck is intended to help solve DNS misconfigurations)

%prep
%setup -n %{name}

%build
%{__rm} -rf %{buildroot}

%install
ruby ./installer.rb cli cgi		\
	-DPREFIX="%{_prefix}"		\
	-DETCDIR="%{_sysconfdir}"	\
	-DLIBEXEC="%{_libexecdir}"	\
	-DMANDIR="%{_mandir}"		\
	-DETCDIST=""			\
	-DCHROOT="%{buildroot}"

%clean
%{__rm} -rf %{buildroot}

%files
%defattr(-, root, root, 0755)
%doc BUGS ChangeLog COPYING CREDITS GPL HISTORY README TODO INSTALL
%doc doc/html
%config %{_sysconfdir}/zonecheck/rootservers
%config %{_sysconfdir}/zonecheck/*.profile
%verify(not size,not md5) %config(noreplace) %{_sysconfdir}/zonecheck/zc.conf
%{_bindir}/*
%{_libexecdir}/zonecheck/zc
%{_libexecdir}/zonecheck/lib
%{_libexecdir}/zonecheck/locale
%{_libexecdir}/zonecheck/test
%{_mandir}/man1/*

%files cgi
%defattr(-, root, root, 0755)
%{_libexecdir}/zonecheck/www
%{_libexecdir}/zonecheck/cgi-bin

%changelog
* Fri Oct 24 2003 Stephane D'Alu <sdalu@nic.fr> - 2.0.0b10
- Updated for new zone configuration profile.

* Fri Oct 24 2003 Jean-Philippe Pick <zonecheck@nic.fr> - 2.0.0b9
- Reworked packaging to meet new installation process.

* Tue Sep 02 2003 Dag Wieers <dag@wieers.com> - 2.0.0-0.b7
- Initial package. (using DAR)

